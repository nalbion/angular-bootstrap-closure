(function(){goog.provide("abc.sliderModule");abc.sliderDirective=function(){return{restrict:"EA",replace:true,require:["abcSlider","ngModel"],controller:"SliderController",scope:{min:"@",max:"@",step:"@"},templateUrl:"template/slider.html",link:abc.sliderLink}};abc.sliderLink=function(scope,element,attrs,ctrls){var sliderCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl)sliderCtrl.init(ngModelCtrl,element)};
abc.SliderCtrl=function($scope,$attrs,$window,$timeout){var ngModelCtrl={},min=parseInt($attrs.min,10)||0,max=parseInt($attrs.max,10)||100,step=parseFloat($attrs.step)||1;$scope["tipPlacement"]="top";$scope["tipAnimation"]=true;this.init=function(ngModelCtrl_,element){ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=this.render;element=element.find("div");var handle=element.find("span");var setValueFromEvent=function(event){if(event.type=="click")$scope.showToolTip();else{if(event.stopPropagation)event.stopPropagation();
if(event.preventDefault)event.preventDefault();event.cancelBubble=true;event.returnValue=false}var value,x=event.clientX,left=element[0].offsetLeft,handleHalfWidth=handle[0].offsetWidth/2,sliderWidth=element[0].offsetWidth;if(x<=left)value=min;else if(x>=left+sliderWidth)value=max;else{var dx=x-left-handleHalfWidth;value=min+dx/sliderWidth*(max-min)}$scope.setValue(value)};var dragStart=$scope.dragStart=function(){var window=angular.element($window);$scope["isTipOpen"]=true;window.on("mousemove",
setValueFromEvent);window.one("mouseup",function(){$scope["isTipOpen"]=false;window.off("mousemove",setValueFromEvent);handle.one("mousedown",$scope.dragStart)})};element.on("click",setValueFromEvent);handle.one("mousedown",dragStart);element.on("$destroy",function(){element.off("click",setValueFromEvent);handle.off("mousedown",dragStart)})};this.render=function(){$scope.value=ngModelCtrl.$viewValue;$scope.updateLeft($scope.value)};$scope.updateLeft=function(value){$scope.left=(value-min)/(max-min)*
100};$scope.setValue=function(value){if(value>=min&&value<=max&&value!=ngModelCtrl.$viewValue){value=Math.round(value/step)*step;ngModelCtrl.$setViewValue(value);ngModelCtrl.$render()}};$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue};$scope.onKeydown=function(evt){if(/(37|38|39|40)/.test(evt.which)){evt.preventDefault();evt.stopPropagation();console.info(evt.which===38||evt.which===39?"right":"left");$scope.setValue($scope.value+(evt.which===38||evt.which===39?step:-step));$scope.showToolTip()}};
$scope.showToolTip=function(){$scope["isTipOpen"]=true;$timeout(function(){$scope["isTipOpen"]=false},1E3)}};abc.sliderModule=angular.module("abc.slider",[]).controller("SliderController",abc.SliderCtrl).directive("abcSlider",abc.sliderDirective);goog.provide("abc.templates");angular.module("abc.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/slider.html",'<div class="ui-slider-group">\n    <div class="ui-slider" ng-mouseleave="reset()" ng-keydown="onKeydown($event)"\n        tabindex="0" role="slider" aria-valuemin="{{min}}" aria-valuemax="{{max}}" aria-valuenow="{{value}}">\n        <div class="tooltip {{tipPlacement}}" ng-class="{ in: isTipOpen, fade: tipAnimation }"\n             ng-style="{left: left + \'%\'}">\n            <div class="tooltip-arrow"></div>\n            <div class="tooltip-inner" ng-bind="value"></div>\n        </div>\n        <span class="ui-slider-handle" tabindex="0" ng-style="{left: left + \'%\'}"></span>\n    </div>\n</div>\n')}]);goog.provide("abc.module");goog.require("abc.templates");goog.require("abc.sliderModule");abc.module=angular.module("abc",["abc.templates",abc.sliderModule.name]);}).call(this); //# sourceMappingURL=../abc.js.map
